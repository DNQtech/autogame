# 🎮 游戏自动化系统

智能化的游戏自动化解决方案，支持装备检测、自动打怪、智能拾取等功能。采用多线程架构，具备高稳定性和用户友好的操作体验。

## ✨ 核心功能

- 🔍 **智能装备检测** - 基于OpenCV模板匹配的高精度装备识别
- ⚔️ **自动战斗系统** - 智能随机移动 + 定时攻击策略
- 📦 **智能装备拾取** - 最近优先的装备拾取算法
- 🎯 **实时状态监控** - 清晰的系统状态提示和操作反馈
- 🔄 **自动错误恢复** - 线程自动重启和异常处理机制
- ⚙️ **高度可配置** - 支持移动半径、攻击间隔等参数调整

## 🏗️ 系统架构

```
游戏自动化系统
┌─────────────────────────────────────────────────────────┐
│                    start_game.py                        │
│                   (主控制器)                             │
├─────────────────┬─────────────────┬─────────────────────┤
│   装备监控线程    │    战斗控制线程   │   键盘监听线程        │
│                │                │                     │
│ • 装备检测器启动  │ • 随机移动控制    │ • 热键监听           │
│ • 状态监控       │ • 攻击技能释放    │ • 程序退出控制        │
│ • 自动重启       │ • 装备拾取暂停    │                     │
└─────────────────┴─────────────────┴─────────────────────┘
         │                    │
         ▼                    ▼
┌─────────────────┐   ┌─────────────────┐
│装备检测器模块     │   │鼠标键盘控制器     │
│                │   │                │
│• 模板匹配       │   │• 鼠标移动/点击    │
│• 屏幕截图       │   │• 键盘按键模拟     │
│• 多尺度检测     │   │• 角色移动控制     │
│• 结果回调       │   │                │
└─────────────────┘   └─────────────────┘
```

## 📁 项目结构

### 核心文件
- **`start_game.py`** - 主程序入口，游戏控制器核心逻辑
- **`template_equipment_detector.py`** - 装备检测器，基于模板匹配
- **`mouse_keyboard_controller.py`** - 鼠标键盘控制器
- **`requirements.txt`** - 项目依赖包列表

### 配置目录
- **`templates/`** - 装备模板图片存储目录
  - `image.png` - 装备模板1 (72x31像素)
  - `img.png` - 装备模板2 (37x54像素)

### 说明文档
- **`README.md`** - 项目说明文档
- **`使用指南.md`** - 详细使用指南

## 🚀 快速开始

### 1. 环境要求
- Python 3.8+
- Windows 操作系统
- 1920x1080 分辨率显示器（推荐）

### 2. 安装依赖
```bash
pip install -r requirements.txt
```

### 3. 准备装备模板
将游戏中的装备图标截图保存到 `templates/` 目录下，支持PNG格式。

### 4. 启动系统
```bash
python start_game.py
```
系统将：
- 初始化装备检测器和模板加载
- 启动多线程监控系统
- 开始自动化游戏流程
- 显示实时状态信息

## 🎯 系统特点

### ✅ 1. 智能装备检测
- **高精度识别**：基于OpenCV模板匹配，支持多尺度检测
- **实时监控**：20FPS高频率扫描，及时发现装备掉落
- **自动重启**：检测器异常时自动恢复，确保持续运行

### ✅ 2. 稳健战斗系统
- **智能移动**：基于屏幕坐标的随机移动策略
- **可配置参数**：移动半径、攻击间隔、移动次数等可调
- **战斗暂停**：发现装备时自动暂停战斗，优先拾取

### ✅ 3. 智能拾取算法
- **最近优先**：自动选择距离角色最近的装备
- **路径优化**：智能判断是否需要移动到装备位置
- **安全拾取**：确保拾取过程不被其他操作打断

## 📊 系统状态提示

运行时您将看到清晰的状态信息：

| 状态类型 | 显示示例 | 说明 |
|---------|---------|------|
| 系统正常 | ✅ [系统状态] 装备检测正常 \| 自动打怪正常 \| 自动拾取就绪 | 所有功能正常运行 |
| 装备检测 | 🔍 [装备检测] 持续监控装备掉落... | 检测器正常工作 |
| 装备发现 | 🎯 [装备发现] 发现1个装备! | 检测到装备掉落 |
| 装备拾取 | 📦 [装备拾取] 拾取完成！ | 装备拾取成功 |
| 战斗系统 | ▶️ [战斗系统] 恢复自动打怪 | 战斗状态变化 |

## 🌟 系统优势

1. **高稳定性** - 多线程架构，异常自动恢复
2. **用户友好** - 清晰的状态提示和操作反馈
3. **高度可配置** - 支持多种参数自定义调整
4. **智能化程度高** - 自动判断最优操作策略
5. **资源占用低** - 优化的算法和内存管理

## ⚙️ 配置参数

系统支持以下参数配置（在代码中可调整）：

```python
# 移动系统配置
game_controller.set_movement_radius(150)        # 移动半径（像素）
game_controller.set_max_random_moves(30)        # 最大随机移动次数

# 战斗系统配置
game_controller.set_fight_intervals(2.0, 1.5)   # 移动间隔, 攻击间隔（秒）

# 拾取系统配置
pickup_safe_distance = 50                       # 安全拾取距离（像素）
```

## 🎮 操作说明

### 启动系统
1. 确保游戏窗口可见且处于前台
2. 运行 `python start_game.py`
3. 观察控制台状态信息
4. 系统将自动开始工作

### 停止系统
- 按 `Ctrl+C` 或 `Ctrl+Q` 安全停止
- 系统将自动清理资源并退出

### 添加装备模板
1. 在游戏中截取装备图标
2. 保存为PNG格式到 `templates/` 目录
3. 重启系统以加载新模板

## 🛠️ 技术栈

- **图像处理**: OpenCV, NumPy
- **屏幕截图**: MSS (Multi-Screen Shot)
- **输入控制**: PyAutoGUI
- **多线程**: Python Threading
- **键盘监听**: Keyboard
- **语言**: Python 3.8+

## 🔧 故障排除

### 常见问题

1. **装备检测不工作**
   - 检查 `templates/` 目录是否有装备模板
   - 确认模板图片与游戏中装备图标匹配
   - 调整检测阈值或添加更多模板

2. **移动或攻击不响应**
   - 确保游戏窗口处于前台
   - 检查屏幕分辨率是否为1920x1080
   - 调整移动和攻击的坐标参数

3. **系统频繁重启**
   - 检查是否有其他程序干扰
   - 确认系统资源充足
   - 查看控制台错误信息

## 💖 赞助支持

如果这个项目对您有帮助，欢迎支持项目的持续开发和维护：


## 🤝 贡献指南

欢迎参与项目贡献！您可以通过以下方式参与：

1. **代码贡献**
   - Fork项目仓库
   - 创建功能分支
   - 提交Pull Request

2. **文档改进**
   - 完善使用文档
   - 翻译多语言版本
   - 添加使用示例

3. **问题反馈**
   - 报告Bug和问题
   - 提出功能建议
   - 分享使用经验

4. **社区建设**
   - 帮助其他用户解决问题
   - 分享最佳实践
   - 推广项目使用

---

🎉 **游戏自动化系统** - 智能、稳定、高效的游戏辅助解决方案！

💝 ** 如果这个项目对您有帮助，请给个 Star 支持一下！**
