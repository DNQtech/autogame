# ğŸ“š æ¸¸æˆè‡ªåŠ¨åŒ–ç³»ç»Ÿ - ä½¿ç”¨æŒ‡å—

<div align="center">

[![ä½¿ç”¨æŒ‡å—](https://img.shields.io/badge/ä½¿ç”¨æŒ‡å—-ä¸­æ–‡-blue?style=for-the-badge)](./ä½¿ç”¨æŒ‡å—.md)
[![Usage Guide](https://img.shields.io/badge/Usage_Guide-English-green?style=for-the-badge)](./Usage_Guide_EN.md)
[![é¡¹ç›®ä¸»é¡µ](https://img.shields.io/badge/é¡¹ç›®ä¸»é¡µ-ä¸­æ–‡-purple?style=for-the-badge)](./README.md)
[![Project Home](https://img.shields.io/badge/Project_Home-English-purple?style=for-the-badge)](./README_EN.md)
[![OCRæ–‡æ¡£](https://img.shields.io/badge/OCRæ–‡æ¡£-ä¸­æ–‡-orange?style=for-the-badge)](./OCR_README.md)
[![OCR Docs](https://img.shields.io/badge/OCR_Docs-English-orange?style=for-the-badge)](./OCR_README_EN.md)

---

</div>

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å¿«é€Ÿä¸Šæ‰‹å’Œä¼˜åŒ–æ¸¸æˆè‡ªåŠ¨åŒ–ç³»ç»Ÿï¼Œå®ç°è£…å¤‡æ£€æµ‹ã€è‡ªåŠ¨æ‰“æ€ªå’Œæ™ºèƒ½æ‹¾å–åŠŸèƒ½ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡

1. **ç³»ç»Ÿè¦æ±‚**
   - Windows æ“ä½œç³»ç»Ÿ
   - Python 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
   - 1920x1080 åˆ†è¾¨ç‡æ˜¾ç¤ºå™¨ï¼ˆæ¨èï¼‰
   - è‡³å°‘ 4GB å†…å­˜

2. **å®‰è£…ä¾èµ–**
   ```bash
   # åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œ
   pip install -r requirements.txt
   ```

3. **éªŒè¯å®‰è£…**
   ```bash
   python -c "import cv2, mss, pyautogui, keyboard; print('ä¾èµ–å®‰è£…æˆåŠŸ!')"
   ```

### ç¬¬äºŒæ­¥ï¼šå‡†å¤‡è£…å¤‡æ¨¡æ¿

1. **æˆªå–è£…å¤‡å›¾æ ‡**
   - åœ¨æ¸¸æˆä¸­æ‰¾åˆ°æ‚¨æƒ³è¦æ£€æµ‹çš„è£…å¤‡
   - ä½¿ç”¨æˆªå›¾å·¥å…·ç²¾ç¡®æˆªå–è£…å¤‡å›¾æ ‡
   - ç¡®ä¿å›¾ç‰‡æ¸…æ™°ã€å°½é‡åªåŒ…å«è£…å¤‡å›¾æ ‡

2. **å›¾ç‰‡è¦æ±‚**
   - **å°ºå¯¸**ï¼š20x20 åˆ° 200x200 åƒç´ 
   - **æ ¼å¼**ï¼šPNGæ ¼å¼ï¼ˆæ¨èï¼‰
   - **è´¨é‡**ï¼šæ¸…æ™°ã€æ— æ¨¡ç³Š
   - **èƒŒæ™¯**ï¼šå°½é‡ç®€å•ï¼Œé¿å…å¤æ‚èƒŒæ™¯

3. **ä¿å­˜æ¨¡æ¿**
   ```
   é¡¹ç›®ç›®å½•/
   â”œâ”€â”€ templates/
   â”‚   â”œâ”€â”€ è£…å¦‡1.png      # ç¬¬ä¸€ä¸ªè£…å¤‡æ¨¡æ¿
   â”‚   â”œâ”€â”€ è£…å¦‡2.png      # ç¬¬äºŒä¸ªè£…å¤‡æ¨¡æ¿
   â”‚   â””â”€â”€ è£…å¦‡3.png      # æ›´å¤šè£…å¤‡æ¨¡æ¿...
   â””â”€â”€ start_game.py
   ```

### ç¬¬ä¸‰æ­¥ï¼šç¬¬ä¸€æ¬¡è¿è¡Œ

1. **å¯åŠ¨æ¸¸æˆ**
   - æ‰“å¼€æ‚¨çš„æ¸¸æˆ
   - ç¡®ä¿æ¸¸æˆçª—å£å¤„äºå‰å°
   - è¿›å…¥æ¸¸æˆä¸»ç•Œé¢

2. **è¿è¡Œç³»ç»Ÿ**
   ```bash
   python start_game.py
   ```

3. **è§‚å¯Ÿè¾“å‡º**
   æ‚¨åº”è¯¥çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºï¼š
   ```
   âœ… [ç³»ç»ŸçŠ¶æ€] è£…å¤‡æ£€æµ‹æ­£å¸¸ | è‡ªåŠ¨æ‰“æ€ªæ­£å¸¸ | è‡ªåŠ¨æ‹¾å–å°±ç»ª
   ğŸ” [è£…å¤‡æ£€æµ‹] æŒç»­ç›‘æ§è£…å¤‡æ‰è½...
   [MOVE] éšæœºç§»åŠ¨: (960, 540) [è®¡æ•°: 1/30]
   [ATTACK] æ”»å‡»æŠ€èƒ½: (960, 540)
   ```
detector.load_templates_from_folder("templates")

# æ–¹æ³•2ï¼šå•ç‹¬åŠ è½½è£…å¤‡å›¾ç‰‡
# detector.load_equipment_template("my_sword.png", "æˆ‘çš„ç¥å‰‘")
# detector.load_equipment_template("epic_armor.png", "å²è¯—æŠ¤ç”²")

# è®¾ç½®æ£€æµ‹åŒºåŸŸï¼ˆå¯é€‰ï¼Œé»˜è®¤å…¨å±ï¼‰
# detector.set_detection_region(100, 100, 1720, 880)  # æ¸¸æˆçª—å£åŒºåŸŸ

# è®¾ç½®åŒ¹é…ç²¾åº¦ï¼ˆå¯é€‰ï¼Œé»˜è®¤0.7ï¼‰
detector.set_match_threshold(0.8)  # 0.8 = 80%ç›¸ä¼¼åº¦æ‰ç®—åŒ¹é…

# æŸ¥çœ‹å·²åŠ è½½çš„æ¨¡æ¿
detector.list_loaded_templates()

# å¼€å§‹å®æ—¶æ£€æµ‹
print("å¼€å§‹ç›‘æ§è£…å¤‡æ‰è½...")
detector.start_realtime_detection(equipment_found_alert, fps=5)

try:
    # è®©ç¨‹åºæŒç»­è¿è¡Œï¼Œç›‘æ§è£…å¤‡
    while True:
        time.sleep(1)
        
except KeyboardInterrupt:
    print("åœæ­¢æ£€æµ‹...")
    detector.stop_realtime_detection()
```

### ç¬¬å››æ­¥ï¼šè¿è¡Œæ£€æµ‹å™¨

```bash
python my_detector.py
```

## âš™ï¸ å‚æ•°è°ƒä¼˜

### 1. åŒ¹é…é˜ˆå€¼è°ƒæ•´
```python
# å¦‚æœæ£€æµ‹å¤ªæ•æ„Ÿï¼ˆè¯¯æŠ¥å¤šï¼‰
detector.set_match_threshold(0.9)  # æé«˜åˆ°90%

# å¦‚æœæ£€æµ‹ä¸å¤Ÿæ•æ„Ÿï¼ˆæ¼æ£€å¤šï¼‰
detector.set_match_threshold(0.6)  # é™ä½åˆ°60%
```

### 2. æ£€æµ‹é¢‘ç‡è°ƒæ•´
```python
# é«˜é¢‘æ£€æµ‹ï¼ˆæ›´åŠæ—¶ï¼Œä½†CPUå ç”¨é«˜ï¼‰
detector.start_realtime_detection(callback, fps=20)

# ä½é¢‘æ£€æµ‹ï¼ˆçœCPUï¼Œä½†å¯èƒ½é”™è¿‡ç¬é—´æ‰è½ï¼‰
detector.start_realtime_detection(callback, fps=3)
```

### 3. æ£€æµ‹åŒºåŸŸä¼˜åŒ–
```python
# åªæ£€æµ‹æ¸¸æˆçª—å£ï¼Œé¿å…æ£€æµ‹åˆ°å…¶ä»–ç¨‹åº
detector.set_detection_region(0, 0, 1920, 1080)

# åªæ£€æµ‹è£…å¤‡æ‰è½åŒºåŸŸï¼ˆå¦‚æœçŸ¥é“å›ºå®šä½ç½®ï¼‰
detector.set_detection_region(500, 300, 900, 600)
```

## ğŸ® å®é™…ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šç›‘æ§ç‰¹å®šè£…å¤‡
```python
detector = TemplateEquipmentDetector()

# åŠ è½½ä½ æƒ³è¦çš„è£…å¤‡å›¾ç‰‡
detector.load_equipment_template("å± é¾™åˆ€.png", "å± é¾™åˆ€")
detector.load_equipment_template("å€šå¤©å‰‘.png", "å€šå¤©å‰‘")

# è‡ªå®šä¹‰è­¦æŠ¥å‡½æ•°
def my_alert(match):
    if match.confidence > 0.9:  # é«˜ç½®ä¿¡åº¦æ‰è­¦æŠ¥
        print(f"ğŸš¨ å‘ç° {match.equipment_name}! å¿«å»æ‹¾å–!")
        # è¿™é‡Œå¯ä»¥æ·»åŠ å£°éŸ³è­¦æŠ¥ã€å‘é€é€šçŸ¥ç­‰

detector.start_realtime_detection(my_alert, fps=10)
```

### ç¤ºä¾‹2ï¼šæ‰¹é‡ç›‘æ§
```python
detector = TemplateEquipmentDetector()

# ä»æ–‡ä»¶å¤¹åŠ è½½æ‰€æœ‰è£…å¤‡
count = detector.load_templates_from_folder("æˆ‘çš„è£…å¤‡åº“")
print(f"åŠ è½½äº† {count} ç§è£…å¤‡")

# å¼€å§‹ç›‘æ§
detector.start_realtime_detection(equipment_found_alert, fps=5)
```

## ğŸ”§ æ•…éšœæ’é™¤

### 1. æ£€æµ‹ä¸åˆ°è£…å¤‡
- æ£€æŸ¥å›¾ç‰‡è´¨é‡æ˜¯å¦æ¸…æ™°
- é™ä½åŒ¹é…é˜ˆå€¼ï¼š`detector.set_match_threshold(0.5)`
- ç¡®è®¤æ£€æµ‹åŒºåŸŸåŒ…å«è£…å¤‡å‡ºç°ä½ç½®
- å°è¯•æˆªå–æ›´å¤§æˆ–æ›´å°çš„è£…å¤‡å›¾ç‰‡

### 2. è¯¯æŠ¥å¤ªå¤š
- æé«˜åŒ¹é…é˜ˆå€¼ï¼š`detector.set_match_threshold(0.9)`
- æˆªå–æ›´ç²¾ç¡®çš„è£…å¤‡å›¾ç‰‡ï¼ˆå»é™¤èƒŒæ™¯ï¼‰
- ç¼©å°æ£€æµ‹åŒºåŸŸ

### 3. æ€§èƒ½é—®é¢˜
- é™ä½æ£€æµ‹é¢‘ç‡ï¼š`fps=3`
- ç¼©å°æ£€æµ‹åŒºåŸŸ
- å‡å°‘åŠ è½½çš„æ¨¡æ¿æ•°é‡

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| æ£€æµ‹æ–¹æ³• | é€Ÿåº¦ | ç²¾ç¡®åº¦ | é€‚ç”¨åœºæ™¯ |
|---------|------|--------|----------|
| OCRæ–‡å­—è¯†åˆ« | 21ç§’ | é«˜ | æ–‡å­—è£…å¤‡å |
| é¢œè‰²æ£€æµ‹ | 17ms | ä¸­ | æŒ‰å“è´¨æ£€æµ‹ |
| æ¨¡æ¿åŒ¹é… | 50-200ms | æé«˜ | ç‰¹å®šè£…å¤‡ |

## ğŸ’¡ æœ€ä½³å®è·µ

1. **å›¾ç‰‡å‡†å¤‡**ï¼šæˆªå–æ¸…æ™°ã€å¯¹æ¯”åº¦é«˜çš„è£…å¤‡å›¾æ ‡
2. **é˜ˆå€¼è®¾ç½®**ï¼šä»0.8å¼€å§‹ï¼Œæ ¹æ®æ•ˆæœè°ƒæ•´
3. **åŒºåŸŸè®¾ç½®**ï¼šåªæ£€æµ‹è£…å¤‡å¯èƒ½å‡ºç°çš„åŒºåŸŸ
4. **é¢‘ç‡æ§åˆ¶**ï¼š5-10 FPSé€šå¸¸è¶³å¤Ÿï¼Œå¤ªé«˜æµªè´¹CPU
5. **æ¨¡æ¿ç®¡ç†**ï¼šæŒ‰è£…å¤‡ç±»å‹åˆ†æ–‡ä»¶å¤¹ç»„ç»‡

ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨è‡ªå·±çš„è£…å¤‡å›¾ç‰‡è¿›è¡Œç²¾ç¡®æ£€æµ‹äº†ï¼ğŸ¯
